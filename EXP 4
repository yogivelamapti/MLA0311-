#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>

#define MAX 5
#define STEP 5

typedef struct {
    float x, y;
    int parent;
} Node;

Node tree[MAX];
int n = 1;

float dist(float x1,float y1,float x2,float y2) {
    return sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2));
}

int collision(float x,float y) {
    return dist(x,y,30,30)<=10 || dist(x,y,60,60)<=12;
}

int main() {
    float gx=90, gy=90;
    tree[0]=(Node){5,5,-1};
    srand(time(0));

    for(int i=0;i<MAX;i++) {
        float rx=rand()%100, ry=rand()%100;
        int near=0;
        for(int j=1;j<n;j++)
            if(dist(tree[j].x,tree[j].y,rx,ry) <
               dist(tree[near].x,tree[near].y,rx,ry))
                near=j;

        float a=atan2(ry-tree[near].y, rx-tree[near].x);
        float nx=tree[near].x+STEP*cos(a);
        float ny=tree[near].y+STEP*sin(a);

        if(!collision(nx,ny)) {
            tree[n++] = (Node){nx,ny,near};
            if(dist(nx,ny,gx,gy)<STEP) {
                tree[n++] = (Node){gx,gy,n-1};
                break;
            }
        }
    }

    printf("Planned Path:\n");
    for(int i=n-1;i!=-1;i=tree[i].parent)
        printf("(%.1f , %.1f)\n",tree[i].x,tree[i].y);

    return 0;
}
